#!/usr/bin/env bash
set -e

# Environment: dev, ci, release
export ENVIRONMENT=dev

# Distribution: k8s, ocp3, ocp4
export DISTRIBUTION=ocp3

export MINISHIFT_VERSION=1.34.2
export OLM_VERSION=0.13.0

export MEMORY=12000

build/scripts/build/build
build/scripts/build/push

build/scripts/build/generate

build/scripts/test/${DISTRIBUTION}/minishift-start

build/scripts/test/common/olm-install

build/scripts/test/ocp/operator-olm-install
build/scripts/test/ocp/operator-olm-uninstall

build/scripts/test/ocp/operator-manual-install
build/scripts/test/ocp/operator-manual-uninstall

build/scripts/test/ocp/operator-olm-install
build/scripts/test/ocp/argocd-install
build/scripts/test/ocp/argocd-uninstall
build/scripts/test/ocp/argocd-oauth-install
